---
title: Syntax
updated_on: Sun Oct 07 00:06:39 +0600 2012
---

h1. Синтаксис файла журнала

Файл журнала состоит из *записей*, разделённых пустыми строками. Каждая запись определяет одну *транзакцию* или множество транзакций.

Новая запись начинается с символа @ и через пробел — даты. После даты через запятую может быть указано время. После даты/времени в той же строке может быть указано описание записи (записывается в атрибут транзакции description).

На следующей строке после даты и описания может начинаться описание атрибутов. Атрибуты указываются в виде @{name = value; ...}@. Более подробно об атрибутах см. [[Attributes]]. Задание атрибутов записи необязательно.

После атрибутов описывается сама запись.

Поддерживаются следующие виды записей:

* Описание [[Templates|шаблона]] транзакции.
* Описание [[Rules|правила]] автоматического создания транзакций.
* Описание [[Periodic|периодической транзакции]].
* Запись о завершении выполнения [[Periodic|периодических транзакций]].
* Запись о транзакции.

Поддерживаются следующие виды транзакций:

* *Проводка*. Описание проводки в общем случае состоит из нескольких полупроводок и (необязательно) указания корреспондирующего счёта. Полупроводки могут быть дебетовыми или кредитовыми. Синтаксис:
** Кредитовая полупроводка: @cr путь/к/счёту 100р@
** Дебетовая полупроводка: @dr путь/к/счёту 100р@
Корреспондирующий счёт указывается на отдельной строке. Примеры:

<pre>
@ 2012/09/09
{category = "test"}
  cr X1 100.0$
  Y1 
</pre>

<pre>
@ 10/03
  cr X1 100р
  dr X2 100р
</pre>

<pre>
@ 10/04
  cr X2 100р
</pre>

* *Сверка баланса*. Синтаксис: @reconciliate путь/к/счёту 1000р@. См. также [[Reconciliation]].
* *Установка курсов валют*. Может быть задано несколько курсов, по одному на строке. Синтаксис:
** Не обратимый счёт: @rate 1.0$ -> 32.1р@
** Обратимый счёт: @rate 1.0€ <-> 41.0р@
** Вычислять кросс-курс по базовой валюте: @rate € <-> $ = via р@