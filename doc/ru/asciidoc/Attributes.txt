Атрибуты
========

YaLedger поддерживает задание произвольных атрибутов для:

* Счетов и групп счетов.
* Транзакций. Атрибуты транзакции автоматически копируются в порождённые ею проводки и полупроводки.

Атрибуты используются для:

* Записи дополнительной структурированной информации о счетах, группах счетов, транзакциях.
* Поиска корреспондирующего счёта для проводки.

Атрибуты задаются в виде +{name = value; ...}+. Значения атрибутов могут задаваться следующим образом:

* "value" (в двойных кавычках). Значение равно заданной строке. При проверке на соответствие — ищется совпадение строки.
* !"value". Значение равно чему угодно, но не заданной строке.
* ?"value". Значение равно заданной строке, но необязательно. Такие атрибуты используются только для уточнения при поиске корреспондирующего счёта (см. ниже).
* * (звёздочка). Значение задано, но равно чему угодно.
* ["value1", "value2"]. Значение равно одной из заданных строк.
* /regex/. Значение подходит под заданное регулярное выражение. Используются PCRE.

При поиске корреспондирующего счёта ищется счёт, атрибуты которого соответствуют атрибутам проводки. При этом сначала необязательные атрибуты (значения которых заданы в виде ?"value") игнорируются. Если находится несколько счетов, то среди них ищутся совпадения необязательных атрибутов. Ищутся счета с наибольшим количеством соответствующих необязательных атрибутов.

Некоторые атрибуты транзакций определяются автоматически:

* description — описание транзакции (строка после даты). Необязательный атрибут.
* source — имя первого счёта, упомянутого в транзакции. Необязательный атрибут.
* rule. Задано для транзакций, порождённых link:Rules.html[правилами]. Равно имени правила.
* periodic. Задано для транзакций, порождённых записями о link:Periodic.html[периодических транзакциях]. Равно имени записи.
* category. Для полупроводок курсовой разницы равно "rates-difference". Для проводок link:Reconciliation.html[согласования баланса] равно "reconciliation".
* redirectedFrom. Задано для полупроводок, порождённых link:DebitRedirect.html[автоматическим перенаправлением дебета]. Равно имени счёта, с которого выполнено перенаправление.

